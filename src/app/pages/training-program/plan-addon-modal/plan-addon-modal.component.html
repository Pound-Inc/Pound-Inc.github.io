<!-- modal.component.html -->
<!-- Close Button -->

<div class="m-2 rounded fixed-top" style="text-align: end">
  <button
    (click)="sendDataAndCloseModal()"
    type="button"
    class="btn btn-light shadow"
  >
    {{  "back" | translate }}
    <span class="mdi mdi-arrow-left"></span>
  </button>
</div>

<div class="col-12 shadow">
  <div class="card rounded shadow p-4 border-0">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <span class="h5 mb-0">الحزمة:</span>
    </div>
    <ul
      class="list-group mb-3 border px-0 text-dark border-0"
      style="background-color: #e9e9e9; border: none !important"
    >
      <li
        class="d-flex justify-content-between lh-sm px-3 py-4 text-primary border-0"
        style="border: none !important"
      >
        <div>
          <h6 class="my-0 text-primary">
            {{ plan.name }}
          </h6>
          <small class="text-muted">{{ plan.description }}</small>
        </div>
        <span class="text-primary">{{ plan.price | currency }}</span>
      </li>
    </ul>

    <!-- Addons Section -->
    <div class="mb-3">
      <h5 class="mb-2 mt-4">
        {{  "addons" | translate }} ({{
          selectedAddons().length
        }})
      </h5>
      <div
        *ngFor="let addon of addons"
        class="list-group mb-2 px-0 clickable-addon border btn"
        [ngClass]="{
          'bg-light shadow text-dark border-light': !addon.selected,
          'text-light border-primary ': addon.selected
        }"
        (click)="toggleAddon(addon)"
      >
        <li
          class="d-flex justify-content-between lh-sm px-3 py-2"
          [ngClass]="{
            'text-muted': !addon.selected,
            'text-primary': addon.selected
          }"
        >
          <div>
            <h6 class="my-0 text-end">
              {{  addon.name | translate }}
              <span *ngIf="addon.icon" class="uil uil-{{ addon.icon }}"></span>
            </h6>
            <p
              class="text-muted text-end w-75 mt-2 mb-0"
              style="font-size: 12px"
            >
              {{  addon.description | translate }}
            </p>
          </div>
          <span
            class="text-muted"
            [ngClass]="{
              'text-muted': !addon.selected,
              'text-primary': addon.selected
            }"
            >{{ addon.price | currency }}</span
          >
        </li>
        <div class="text-start ms-2">
          <i
            [ngClass]="{
              'text-light': !addon.selected,
              'text-primary': addon.selected
            }"
            class="uil uil-check text-primary"
          ></i>
        </div>
      </div>
    </div>

    <!-- Total Section -->
    <div
      class="d-flex justify-content-between align-items-center mb-3 border-top border-bottom py-2 px-3"
    >
      <div class="mb-0">
        <span class="mb-2"
          >{{  "price" | translate }}:</span
        >
        <br />
        <span class="mb-2 text-muted">{{  "VAT" | translate }}:</span>
        <br />
        {{  "total" | translate }}:
      </div>

      <strong class="text-dark text-end">
        {{ getTotalAmountExtVAT() | currency }}
        <br />
        <span class="text-muted">%25.00</span>
        <br />
        <span class="text-success">
          {{ getTotalAmountIncVAT() | currency }}
        </span>
      </strong>
    </div>

    <!-- Redeem Button -->
    <form>
      <div class="input-group">
        <button type="submit" class="btn btn-dark px-4" (click)="setCart()">
          {{  "continue" | translate }}
          <span class="mdi mdi-arrow-left"></span>
        </button>
      </div>
    </form>
  </div>
</div>
