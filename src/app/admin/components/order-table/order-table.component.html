<div class="card border-0">
  <div>
    <h4 class="p-4">
      {{ "Training Programs" | translate }}
    </h4>
    <div
      class="mb-3 row align-items-center justify-content-start ms-1 gap-2 px-2 col-12"
    >
      <div class="col-3 px-0 mx-0">
        <input
          id="table-complete-search"
          type="text"
          class="form-control"
          name="searchTerm"
          placeholder="Search by Name..."
        />
      </div>
      <div class="col-2 px-0 mx-0">
        <button class="btn btn-light w-100 px-0 mx-0" (click)="editRow()">
          <span class="mdi mdi-plus"></span>
        </button>
      </div>
      <div class="col-2 px-0 mx-0">
        <button
          class="btn btn-secondary w-100 px-0 mx-0"
          [disabled]="!selectedRow"
          (click)="editRow()"
        >
          <span class="mdi mdi-pencil"></span>
        </button>
      </div>
      <div class="col-1 px-0 mx-0">
        <button
          class="btn btn-danger w-100 px-0 mx-0"
          [disabled]="!selectedRow"
          (click)="deleteRow()"
        >
          <span class="mdi mdi-delete"></span>
        </button>
      </div>
    </div>
  </div>

  <div
    class="table-responsive border-bottom border-light border-top rounded-bottom"
    style="height: 545px"
  >
    <form class="mt-3">
      <table class="table">
        <thead>
          <tr class="sticky-header">
            <th *ngFor="let column of columns">
              {{ column.name }}
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let order of orders"
            (click)="onRowClick(order)"
            [class.clicked-row]="selectedRow && selectedRow._id === order._id"
          >
            <td
              *ngFor="let column of columns"
              [style.minWidth]="column.width + 'px'"
            >
              <ng-container *ngIf="column.type === 'text'">
                {{ order[column._id] }}
              </ng-container>
              <ng-container *ngIf="column.type === 'number'">
                {{ order[column._id] | currency }}
              </ng-container>
              <ng-container *ngIf="column.type === 'date'">
                <span class="mdi mdi-calendar"></span>
                {{ order[column._id] | date : "dd/MM/yyyy" }}
                <br />
                <span class="mdi mdi-clock-outline"></span>
                {{ order[column._id] | date : "HH:mm:ss" }}
              </ng-container>
              <ng-container *ngIf="column.type === 'array'">
                <ul>
                  <li *ngFor="let item of order[column._id]">
                    {{ item.name }}
                    <br />
                    {{ item.price | currency }}
                  </li>
                </ul>
              </ng-container>
              <ng-container *ngIf="column.type === 'dropdown'">
                <select
                  class="form-control"
                  (change)="onStatusChange($event, order)"
                >
                  <option
                    *ngFor="let status of orderStatuses"
                    [ngValue]="status"
                    [selected]="status === order.status"
                  >
                    {{ status }}
                  </option>
                </select>
              </ng-container>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</div>
